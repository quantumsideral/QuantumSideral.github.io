<!DOCTYPE html>
<html lang="{{ site.lang | default: "fr" }}">

  <head>
    <meta charset="UTF-8">
{% seo %}
    <meta name="description" content="{{ default: site.description }}"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  </head>

  <body id="body">
    <script type="text/javascript">
      if(typeof(Storage) !== "undefined") {
        if (localStorage.lightModeQS) {document.getElementById("body").className = localStorage.lightModeQS ;}
        else {document.getElementById("body").className = "light-mode" ;}
        
        if (localStorage.buttonLightModeQS) {document.getElementById("darkLight").className = localStorage.buttonLightModeQS ;}
        else {document.getElementById("darkLight").className = "border" ;}}
      else {
        document.getElementById("body").className = "light-mode" ;
        document.getElementById("darkLight").className = "border" ;}
    </script>

    <section class="page-header">
      <div class="neon"><h1 class="project-name">Quantum Sideral</h1><br><h2 class="project-tagline">Des particules d’histoires dans <br class="respbreak"/>un multivers d’aventures</h2></div>

        <div class="page-header-menu">
          <div class="divbreak">
            <a href="{{ site.baseurl }}{% link index.md %}"><button class="border">Accueil</button></a>
            <button type="button" class="dropdown-off" id="dropdownButton" onclick="toggleMenu()" title="Toggle menu">Histoires</button>
            <script type="text/javascript">
              function toggleMenu() {
                var dropdownMenu = document.getElementById("dropdownMenu");
                var currentClassStory = dropdownMenu.className;
                dropdownMenu.className = currentClassStory == "dropdown-hide" ? "dropdown-show" : "dropdown-hide";

                var dropdownButton = document.getElementById("dropdownButton");
                var currentClassStory = dropdownButton.className;
                dropdownButton.className = currentClassStory == "dropdown-off" ? "dropdown-on" : "dropdown-off";}
            </script>
          </div>
          <div class="divbreak">
            <a href="{{ site.baseurl }}{% link license.md %}"><button class="border">Licences</button></a>
            <a href="{{ site.baseurl }}{% link about.md %}"><button class="border">A propos</button></a>
          </div>
          <div class="divbreak">
            <a href="{{ site.baseurl }}{% link suggestions.md %}"><button class="border">Contact</button></a>
            <a href="{{ site.baseurl }}{% link feed.xml %}"><button class="border">RSS</button></a>
          </div>
          <div class="divbreak">
            <a href="https://quantumsideral.github.io/la-croisee-des-chemins/"><button class="border">La croisee des chemins</button></a>
          </div>
          <div class="divbreak">
            <button type="button" class="border" id="darkLight" onclick="toggleDarkLight()">Dark mode</button>
            <script type="text/javascript">
              function toggleDarkLight() {
                var body = document.getElementById("body");
                var currentClass = body.className;
                body.className = currentClass == "dark-mode" ? "light-mode" : "dark-mode";
                localStorage.setItem("lightModeQS", body.className);

                var button = document.getElementById("darkLight");
                var currentClassButton = button.className;
                button.className = currentClassButton == "border" ? "border-dark" : "border";
                localStorage.setItem("buttonLightModeQS", button.className);}
            </script>
          </div>
      </div>
      <div class="dropdown-hide" id="dropdownMenu">
        <div class="divbreak">
          <a href="{% for post in site.categories.Histoires limit:1 %}{{ post.url }}{% endfor %}"><button class="border">Derniere histoire</button></a>
        </div>
        <div class="divbreakDD">
          <button type="button" class="dropdown-off" id="dropdownButtonSF" onclick="toggleListMenu('dropdownMenuSF','dropdownButtonSF')" title="Toggle menu"></button>
          <div id="dropdownMenuSF" class="dropdown-list-hide">
            <ul>
              {% for post in site.categories.SF %}
                <li><a href="{{ post.url }}" class="dropdown-sublist" >{{ post.title }}</a></li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <div class="divbreakDD">
          <button type="button" class="dropdown-off" id="dropdownButtonFantasy" onclick="toggleListMenu('dropdownMenuFantasy','dropdownButtonFantasy')" title="Toggle menu">Fantasy</button>
          <div id="dropdownMenuFantasy" class="dropdown-list-hide">
            <ul>
              {% for post in site.categories.Fantasy %}
                <li><a href="{{ post.url }}" class="dropdown-sublist" >{{ post.title }}</a></li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <div class="divbreakDD">
          <button type="button" class="dropdown-off" id="dropdownButtonFantastique" onclick="toggleListMenu('dropdownMenuFantastique','dropdownButtonFantastique')" title="Toggle menu">Fantastique</button>
          <div id="dropdownMenuFantastique" class="dropdown-list-hide">
            <ul>
              {% for post in site.categories.Fantastique %}
                <li><a href="{{ post.url }}" class="dropdown-sublist" >{{ post.title }}</a></li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <div class="divbreak">
          <a href="{{ site.baseurl }}{% link all.md %}"><button class="border">Toutes les histoires</button></a>
        </div>

        <script type="text/javascript">
          function toggleListMenu(idMenu,idButton) {
            var dropdownMenu = document.getElementById(idMenu);
            var currentClassDD = dropdownMenu.className;
            dropdownMenu.className = currentClassDD == "dropdown-list-hide" ? "dropdown-list-show" : "dropdown-list-hide";

            var dropdownButton = document.getElementById(idButton);
            var currentClassDD = dropdownButton.className;
            dropdownButton.className = currentClassDD == "dropdown-off" ? "dropdown-on" : "dropdown-off";}
        </script>
      </div>

    </section>
    <section class="main-content">{{ content }} 

    {% if page.commentIssueId %}
      <footer class="site-footer">
        <span class="site-footer-credits"><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a></span>
      </footer><br><br>

      <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/comments.css">
      <div id="comments">
        <h1>Commentaires</h1>
        <div id="header">
          Vous souhaitez commenter ? Allez sur <a href="https://github.com/quantumsideral/quantumsideral.github.io/issues/{{ page.commentIssueId }}"> le fil de commentaires de ce post sur GitHub</a> ! (Vous allez avoir besoin d’un compte Github.)<br><br>
        </div>
      </div>
        <script src="{{ site.baseurl}}/assets/js/jquery.min.js"></script>
        <script type="text/javascript" src="{{ site.baseurl }}/assets/js/date.js"></script>
        <script type="text/javascript">
          function loadComments(data) {
            for (var i=0; i<data.length; i++) {
              var cuser = data[i].user.login;
              var cuserlink = "https://www.github.com/" + data[i].user.login;
              var clink = "https://github.com/quantumsideral/quantumsideral.github.io/issues/{{ page.commentIssueId }}#issuecomment-" + data[i].url.substring(data[i].url.lastIndexOf("/")+1);
              var cbody = data[i].body_html;
              var cavatarlink = data[i].user.avatar_url;
              var cdate = Date.parse(data[i].created_at).toLocalDateString("yyyy-MM-dd HH:mm:ss");

              $("#comments").append("<div class='comment'><div class='commentheader'><div class='commentgravatar'>" + '<img src="' + cavatarlink + '" alt="" width="20" height="20">' + "</div><a class='commentuser' href=\""+ cuserlink + "\">" + cuser + "</a><a class='commentdate' href=\"" + clink + "\">" + cdate + "</a></div><div class='commentbody'>" + cbody + "</div></div>");}}
        
          $.ajax("https://api.github.com/repos/quantumsideral/quantumsideral.github.io/issues/{{ page.commentIssueId }}/comments?per_page=100", {
            headers: {Accept: "application/vnd.github.full+json"},
            dataType: "json",
            success: function(msg){loadComments(msg);}});
        </script>
      {% endif %}
    </section>
  </body>
</html>

